{"ast":null,"code":"import _asyncToGenerator from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _slicedToArray from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";function _regeneratorRuntime(){\"use strict\";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol=\"function\"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||\"@@iterator\",asyncIteratorSymbol=$Symbol.asyncIterator||\"@@asyncIterator\",toStringTagSymbol=$Symbol.toStringTag||\"@@toStringTag\";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},\"\");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state=\"suspendedStart\";return function(method,arg){if(\"executing\"===state)throw new Error(\"Generator is already running\");if(\"completed\"===state){if(\"throw\"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if(\"next\"===context.method)context.sent=context._sent=context.arg;else if(\"throw\"===context.method){if(\"suspendedStart\"===state)throw state=\"completed\",context.arg;context.dispatchException(context.arg);}else\"return\"===context.method&&context.abrupt(\"return\",context.arg);state=\"executing\";var record=tryCatch(innerFn,self,context);if(\"normal\"===record.type){if(state=context.done?\"completed\":\"suspendedYield\",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}\"throw\"===record.type&&(state=\"completed\",context.method=\"throw\",context.arg=record.arg);}};}(innerFn,self,context),generator;}function tryCatch(fn,obj,arg){try{return{type:\"normal\",arg:fn.call(obj,arg)};}catch(err){return{type:\"throw\",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){[\"next\",\"throw\",\"return\"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(\"throw\"!==record.type){var result=record.arg,value=result.value;return value&&\"object\"==typeof value&&hasOwn.call(value,\"__await\")?PromiseImpl.resolve(value.__await).then(function(value){invoke(\"next\",value,resolve,reject);},function(err){invoke(\"throw\",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke(\"throw\",error,resolve,reject);});}reject(record.arg);}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();};}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(undefined===method){if(context.delegate=null,\"throw\"===context.method){if(delegate.iterator.return&&(context.method=\"return\",context.arg=undefined,maybeInvokeDelegate(delegate,context),\"throw\"===context.method))return ContinueSentinel;context.method=\"throw\",context.arg=new TypeError(\"The iterator does not provide a 'throw' method\");}return ContinueSentinel;}var record=tryCatch(method,delegate.iterator,context.arg);if(\"throw\"===record.type)return context.method=\"throw\",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,\"return\"!==context.method&&(context.method=\"next\",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method=\"throw\",context.arg=new TypeError(\"iterator result is not an object\"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type=\"normal\",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:\"root\"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if(\"function\"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;){if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;}return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,\"constructor\",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,\"constructor\",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,\"GeneratorFunction\"),exports.isGeneratorFunction=function(genFun){var ctor=\"function\"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||\"GeneratorFunction\"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,\"GeneratorFunction\")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,\"Generator\"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,\"toString\",function(){return\"[object Generator]\";}),exports.keys=function(object){var keys=[];for(var key in object){keys.push(key);}return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this){\"t\"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);}},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if(\"throw\"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type=\"throw\",record.arg=exception,context.next=loc,caught&&(context.method=\"next\",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if(\"root\"===entry.tryLoc)return handle(\"end\");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,\"catchLoc\"),hasFinally=hasOwn.call(entry,\"finallyLoc\");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error(\"try statement without catch or finally\");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,\"finallyLoc\")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&(\"break\"===type||\"continue\"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method=\"next\",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if(\"throw\"===record.type)throw record.arg;return\"break\"===record.type||\"continue\"===record.type?this.next=record.arg:\"return\"===record.type?(this.rval=this.arg=record.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(\"throw\"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error(\"illegal catch attempt\");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},\"next\"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}import{BigNumber}from'bignumber.js';import _ from'lodash';import React,{Fragment,useState,useEffect}from\"react\";import{connect}from'react-redux';import'./ContractPage.css';import GradientButton from\"../components/buttons/GradientButton\";import TabBarItem from\"../components/TabBarItem\";import TabBar from\"../components/TabBar\";import ContractModes from\"../constants/ContractModes\";import Web3 from\"web3\";import{useForm}from'react-hook-form';import Dnero from\"../services/Dnero\";import Wallet from\"../services/Wallet\";import DneroJS from\"../libs/dnerojs.esm\";import{store}from\"../state\";import PageHeader from\"../components/PageHeader\";import{getQueryParameters,zipMap}from\"../utils/Utils\";import Api from\"../services/Api\";import{createSmartContractTransaction}from\"../state/actions/Transactions\";var web3=new Web3(\"http://localhost\");function isReadFunction(functionData){var constant=_.get(functionData,['constant'],null);var stateMutability=_.get(functionData,['stateMutability'],null);return stateMutability===\"view\"||stateMutability===\"pure\"||constant===true;}function initContract(abiStr,address){try{var abiJSON=parseJSON(abiStr);return new web3.eth.Contract(abiJSON,address);}catch(e){return null;}}function parseJSON(value){try{var json=JSON.parse(value);return json;}catch(e){return null;}}function isValidByteCode(value){var json=parseJSON(value);return _.isNil(json&&json['object'])===false;}function validateByteCode(value){return isValidByteCode(value)||\"Invalid byte code\";}function isValidABI(value){var json=parseJSON(value);try{return _.isNil(json&&new web3.eth.Contract(json,null))===false;}catch(e){return false;}}function validateAddress(value){return web3.utils.isAddress(value)||\"Invalid address\";}function validateABI(value){return isValidABI(value)||\"Invalid ABI/JSON interface\";}function validateFunctionName(value){if(_.isNil(value)||value.length===0){return\"Function is required\";}else{return true;}}function validateInput(type,value){return true;try{return _.isNil(web3.eth.abi.encodeParameter(type,JSON.parse(value)))===false;}catch(e){return\"Invalid value for type of \"+type;}}function getFunctions(jsonInterface){var functions=_.filter(jsonInterface,function(o){return o.type===\"function\";});return functions;}function getConstructor(jsonInterface){var constructors=_.filter(jsonInterface,function(o){return o.type===\"constructor\";});return _.first(constructors);}function Inputs(title,inputs,formHook){var register=formHook.register,errors=formHook.errors;return/*#__PURE__*/React.createElement(\"div\",null,inputs.length>0&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"FormSectionTitle\"},title),/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumns\"},inputs.map(function(value,index){var name=value.name,type=value.type;var argName=\"arg\".concat(index);var key=\"inputs.\".concat(argName);return/*#__PURE__*/React.createElement(Fragment,{key:key},/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"InputTitle\"},name+\" (\"+type+\")\"),/*#__PURE__*/React.createElement(\"input\",{className:\"RoundedInput\",placeholder:\"Enter \"+name,name:key,ref:register({required:\"Input \"+name+\" is required\",validate:function validate(val){return validateInput(type,val);}})}),_.get(errors,['inputs',argName])&&/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\"},_.get(errors,['inputs',argName,'message']))));}))));}function DeployContractForm(props){var onSubmit=props.onSubmit;var _useForm=useForm({mode:'onChange'}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors,watch=_useForm.watch;var abi=watch(\"abi\");var byteCode=watch(\"byteCode\");var contract=initContract(abi,null);var jsonInterface=_.get(contract,['options','jsonInterface']);var constructor=getConstructor(jsonInterface);var constructorInputs=_.get(constructor,['inputs'],[]);window.contract=contract;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumns\"},/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"FormSectionTitle\"},\"ABI/JSON Interface\"),/*#__PURE__*/React.createElement(\"textarea\",{className:\"RoundedInput\",placeholder:\"Paste ABI/JSON interface\",name:\"abi\",ref:register({required:\"Contract ABI/JSON interface is required.\",validate:validateABI})}),errors.abi&&/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\"},errors.abi.message)),/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"FormSectionTitle\"},\"Byte Code\"),/*#__PURE__*/React.createElement(\"textarea\",{className:\"RoundedInput\",placeholder:\"Paste byte code\",name:\"byteCode\",ref:register({required:\"Contract byte code is required.\",validate:validateByteCode})}),errors.byteCode&&/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\"},errors.byteCode.message))),Inputs(\"Constructor Inputs\",constructorInputs,{register:register,errors:errors}),/*#__PURE__*/React.createElement(GradientButton,{title:\"Deploy Contract\",style:{marginTop:15},disabled:_.size(errors)>0||_.isNil(abi)||_.isNil(byteCode),onClick:handleSubmit(onSubmit)}));}function InteractWithContractForm(props){var defaultFormValues=props.defaultFormValues,disabled=props.disabled,loading=props.loading,onSubmit=props.onSubmit,onChange=props.onChange;var defaultValues=_.merge({functionName:\"\"},defaultFormValues);var _useForm2=useForm({mode:'onChange',defaultValues:defaultValues}),register=_useForm2.register,handleSubmit=_useForm2.handleSubmit,errors=_useForm2.errors,watch=_useForm2.watch,setValue=_useForm2.setValue;var _useState=useState(defaultValues),_useState2=_slicedToArray(_useState,2),lastFormState=_useState2[0],setLastFormState=_useState2[1];var formState=watch();// watching every fields in the form\nvar isDirty=_.isEqual(lastFormState,formState)===false;useEffect(function(){if(isDirty){setLastFormState(formState);if(onChange){onChange();}}},[isDirty,formState,onChange,setValue]);var abi=watch(\"abi\");var address=watch(\"address\");var functionName=watch(\"functionName\");var contract=initContract(abi,null);var jsonInterface=_.get(contract,['options','jsonInterface']);var functions=getFunctions(jsonInterface)||[];var functionsByName=zipMap(functions.map(function(_ref){var name=_ref.name;return name;}),functions);var functionData=_.get(functionsByName,[functionName]);var functionInputs=_.get(functionData,['inputs'],[]);var isFunctionReadOnly=isReadFunction(functionData);return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"FormSectionTitle\"},\"Contract Address\"),/*#__PURE__*/React.createElement(\"input\",{className:\"RoundedInput\",placeholder:\"Enter contract address\",name:\"address\",ref:register({required:\"Contract address is required.\",validate:validateAddress})}),errors.address&&/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\"},errors.address.message),/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumns\"},/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"FormSectionTitle\"},\"ABI/JSON Interface\"),/*#__PURE__*/React.createElement(\"textarea\",{className:\"RoundedInput\",placeholder:\"Paste ABI/JSON interface\",name:\"abi\",ref:register({required:\"Contract ABI/JSON interface is required.\",validate:validateABI})}),errors.abi&&/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\"},errors.abi.message)),functions.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"FormSectionTitle\"},\"Function\"),/*#__PURE__*/React.createElement(\"select\",{name:\"functionName\",className:\"RoundedInput\",placeholder:\"Choose function\",ref:register({required:\"Function is required.\",validate:validateFunctionName}),onChange:function onChange(){}},/*#__PURE__*/React.createElement(\"option\",{value:\"\",key:\"__placeholder__\"},\"Choose function\"),functions.map(function(value,index){var name=value.name,type=value.type;return/*#__PURE__*/React.createElement(\"option\",{value:name,key:name},name);})),errors.functionName&&/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\"},errors.functionName.message))),Inputs(\"Function Inputs\",functionInputs,{register:register,errors:errors}),/*#__PURE__*/React.createElement(GradientButton,{title:isFunctionReadOnly?\"Read\":\"Write\",style:{marginTop:15},disabled:disabled||_.size(errors)>0||_.isNil(abi)||_.isNil(address)||_.isNil(functionName),loading:loading,onClick:handleSubmit(onSubmit)}));}var DeployContractContent=/*#__PURE__*/function(_React$Component){_inherits(DeployContractContent,_React$Component);var _super=_createSuper(DeployContractContent);function DeployContractContent(){var _this;_classCallCheck(this,DeployContractContent);_this=_super.call(this);_this.onSubmit=function(formData){var abi=formData.abi,byteCode=formData.byteCode,inputs=formData.inputs;var byteCodeJson=parseJSON(byteCode);var contract=initContract(abi,null);var jsonInterface=_.get(contract,['options','jsonInterface']);var constructor=getConstructor(jsonInterface);var constructorInputs=_.get(constructor,['inputs'],[]);var constructorInputTypes=_.map(constructorInputs,function(_ref2){var name=_ref2.name,type=_ref2.type;return type;});var constructorInputValues=_.map(constructorInputs,function(_ref3,index){var name=_ref3.name,type=_ref3.type;var val=inputs[\"arg\".concat(index)];if(type.includes('[]')){return parseJSON(val);}else if(type===\"boolean\"||type===\"bool\"){return Boolean(parseJSON(val));}return val;});var encodedParameters=web3.eth.abi.encodeParameters(constructorInputTypes,constructorInputValues).slice(2);var from=Wallet.getWalletAddress();var data=byteCodeJson.object+encodedParameters;var value=0;store.dispatch(createSmartContractTransaction(ContractModes.DEPLOY,abi,{from:from,to:null,data:data,value:value}));};_this.defaultState={loading:false};_this.state=_this.defaultState;return _this;}_createClass(DeployContractContent,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"DeployContractContent\"},/*#__PURE__*/React.createElement(DeployContractForm,{onSubmit:this.onSubmit}));}}]);return DeployContractContent;}(React.Component);var InteractWithContractContent=/*#__PURE__*/function(_React$Component2){_inherits(InteractWithContractContent,_React$Component2);var _super2=_createSuper(InteractWithContractContent);function InteractWithContractContent(){var _this2;_classCallCheck(this,InteractWithContractContent);_this2=_super2.call(this);_this2.onSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(formData){var address,abi,functionName,inputs,contract,jsonInterface,functions,functionsByName,functionData,functionInputs,functionOutputs,functionSignature,isFunctionReadOnly,inputTypes,inputValues,encodedParameters,feeInDTokenWei,from,gasPrice,gasLimit,data,value,senderSequence,_senderSequence,tx,rawTxBytes,callResponse,callResponseJSON,result,errorMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:address=formData.address,abi=formData.abi,functionName=formData.functionName,inputs=formData.inputs;contract=initContract(abi,address);jsonInterface=_.get(contract,['options','jsonInterface']);functions=getFunctions(jsonInterface)||[];functionsByName=zipMap(functions.map(function(_ref5){var name=_ref5.name;return name;}),functions);functionData=_.get(functionsByName,[functionName]);functionInputs=_.get(functionData,['inputs'],[]);functionOutputs=_.get(functionData,['outputs'],[]);functionSignature=_.get(functionData,['signature']).slice(2);isFunctionReadOnly=isReadFunction(functionData);inputTypes=_.map(functionInputs,function(_ref6){var name=_ref6.name,type=_ref6.type;return type;});inputValues=_.map(functionInputs,function(_ref7,index){var name=_ref7.name,type=_ref7.type;var val=inputs[\"arg\".concat(index)];if(type.includes('[]')){return parseJSON(val);}else if(type===\"boolean\"||type===\"bool\"){return Boolean(parseJSON(val));}return val;});encodedParameters=web3.eth.abi.encodeParameters(inputTypes,inputValues).slice(2);feeInDTokenWei=new BigNumber(10).pow(12);from=Wallet.getWalletAddress();gasPrice=Dnero.getSmartContractGasPrice();//feeInDTokenWei;\ngasLimit=10000000;data=functionSignature+encodedParameters;value=0;senderSequence=1;if(!isFunctionReadOnly){_context.next=42;break;}_this2.setState({isLoading:true,callResult:null});//Call smart contract (no signing)\n_senderSequence=1;tx=Dnero.unsignedSmartContractTx({from:from,to:address,data:data,value:value,transactionFee:gasPrice,gasLimit:gasLimit},_senderSequence);rawTxBytes=DneroJS.TxSigner.serializeTx(tx);_context.prev=25;_context.next=28;return Api.callSmartContract({data:rawTxBytes.toString('hex').slice(2)},{network:Dnero.getChainID()});case 28:callResponse=_context.sent;_context.next=31;return callResponse.json();case 31:callResponseJSON=_context.sent;result=_.get(callResponseJSON,'result');errorMessage=_.get(result,'vm_error');_this2.setState({callResult:_.merge(result,{outputs:functionOutputs,decodedParameters:web3.eth.abi.decodeParameters(functionOutputs,_.get(result,'vm_return'))}),isLoading:false});_context.next=40;break;case 37:_context.prev=37;_context.t0=_context[\"catch\"](25);//Stop loading and put the error message in the vm_error like it came fromm the blockchain.\n_this2.setState({isLoading:false,callResult:{vm_error:_context.t0.message}});case 40:_context.next=43;break;case 42:store.dispatch(createSmartContractTransaction(ContractModes.INTERACT,abi,{from:from,to:address,data:data,value:value}));case 43:case\"end\":return _context.stop();}}},_callee,null,[[25,37]]);}));return function(_x){return _ref4.apply(this,arguments);};}();_this2.onChange=function(){_this2.setState({callResult:null});};_this2.defaultState={loading:false,result:null};_this2.state=_this2.defaultState;return _this2;}_createClass(InteractWithContractContent,[{key:\"render\",value:function render(){var defaultFormValues=this.props.defaultFormValues;var _this$state=this.state,isLoading=_this$state.isLoading,callResult=_this$state.callResult;var error=_.get(callResult,'vm_error');return/*#__PURE__*/React.createElement(\"div\",{className:\"InteractWithContractContent\"},/*#__PURE__*/React.createElement(InteractWithContractForm,{defaultFormValues:defaultFormValues,onSubmit:this.onSubmit,onChange:this.onChange,loading:isLoading,disabled:isLoading}),error&&/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\",style:{marginTop:20}},error),callResult&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:20}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"InputTitle\"},\"Raw Result\"),/*#__PURE__*/React.createElement(\"input\",{className:\"RoundedInput\",name:\"vm_return\",value:_.get(callResult,'vm_return'),readOnly:true}))),callResult&&/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumns\"},_.get(callResult,'outputs',[]).map(function(value,index){var name=value.name,type=value.type;return/*#__PURE__*/React.createElement(Fragment,{key:name},/*#__PURE__*/React.createElement(\"div\",{className:\"FormColumn\"},/*#__PURE__*/React.createElement(\"div\",{className:\"InputTitle\"},name+\" (\"+type+\")\"),/*#__PURE__*/React.createElement(\"input\",{className:\"RoundedInput\",value:_.get(callResult,['decodedParameters',index]),readOnly:true})));})));}}]);return InteractWithContractContent;}(React.Component);var ContractPage=/*#__PURE__*/function(_React$Component3){_inherits(ContractPage,_React$Component3);var _super3=_createSuper(ContractPage);function ContractPage(){_classCallCheck(this,ContractPage);return _super3.apply(this,arguments);}_createClass(ContractPage,[{key:\"render\",value:function render(){var contractMode=this.props.match.params.contractMode;var queryParams=getQueryParameters(this.props.history.location.search);if(queryParams['abi']){queryParams['abi']=atob(queryParams['abi']);}return/*#__PURE__*/React.createElement(\"div\",{className:\"ContractPage\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ContractPage__detail-view\"},/*#__PURE__*/React.createElement(PageHeader,{title:null,sticky:true},/*#__PURE__*/React.createElement(TabBar,{centered:true,condensed:false,style:{width:\"100%\"}},/*#__PURE__*/React.createElement(TabBarItem,{title:\"Deploy Contract\",href:\"/wallet/contract/\"+ContractModes.DEPLOY}),/*#__PURE__*/React.createElement(TabBarItem,{title:\"Interact with Contract\",href:\"/wallet/contract/\"+ContractModes.INTERACT}))),contractMode===ContractModes.DEPLOY&&/*#__PURE__*/React.createElement(DeployContractContent,null),contractMode===ContractModes.INTERACT&&/*#__PURE__*/React.createElement(InteractWithContractContent,{defaultFormValues:queryParams})));}}]);return ContractPage;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{};};export default connect(mapStateToProps)(ContractPage);","map":{"version":3,"names":["BigNumber","_","React","Fragment","useState","useEffect","connect","GradientButton","TabBarItem","TabBar","ContractModes","Web3","useForm","Dnero","Wallet","DneroJS","store","PageHeader","getQueryParameters","zipMap","Api","createSmartContractTransaction","web3","isReadFunction","functionData","constant","get","stateMutability","initContract","abiStr","address","abiJSON","parseJSON","eth","Contract","e","value","json","JSON","parse","isValidByteCode","isNil","validateByteCode","isValidABI","validateAddress","utils","isAddress","validateABI","validateFunctionName","length","validateInput","type","abi","encodeParameter","getFunctions","jsonInterface","functions","filter","o","getConstructor","constructors","first","Inputs","title","inputs","formHook","register","errors","map","index","name","argName","key","required","validate","val","DeployContractForm","props","onSubmit","mode","handleSubmit","watch","byteCode","contract","constructor","constructorInputs","window","message","marginTop","size","InteractWithContractForm","defaultFormValues","disabled","loading","onChange","defaultValues","merge","functionName","setValue","lastFormState","setLastFormState","formState","isDirty","isEqual","functionsByName","functionInputs","isFunctionReadOnly","DeployContractContent","formData","byteCodeJson","constructorInputTypes","constructorInputValues","includes","Boolean","encodedParameters","encodeParameters","slice","from","getWalletAddress","data","object","dispatch","DEPLOY","to","defaultState","state","Component","InteractWithContractContent","functionOutputs","functionSignature","inputTypes","inputValues","feeInDTokenWei","pow","gasPrice","getSmartContractGasPrice","gasLimit","senderSequence","setState","isLoading","callResult","tx","unsignedSmartContractTx","transactionFee","rawTxBytes","TxSigner","serializeTx","callSmartContract","toString","network","getChainID","callResponse","callResponseJSON","result","errorMessage","outputs","decodedParameters","decodeParameters","vm_error","INTERACT","error","ContractPage","contractMode","match","params","queryParams","history","location","search","atob","width","mapStateToProps"],"sources":["/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/ContractPage.js"],"sourcesContent":["import {BigNumber} from 'bignumber.js';\nimport _ from 'lodash';\nimport React, {Fragment, useState, useEffect} from \"react\";\nimport {connect} from 'react-redux'\nimport './ContractPage.css';\nimport GradientButton from \"../components/buttons/GradientButton\";\nimport TabBarItem from \"../components/TabBarItem\";\nimport TabBar from \"../components/TabBar\";\nimport ContractModes from \"../constants/ContractModes\";\nimport Web3 from \"web3\";\nimport {useForm} from 'react-hook-form';\nimport Dnero from \"../services/Dnero\";\nimport Wallet from \"../services/Wallet\";\nimport DneroJS from \"../libs/dnerojs.esm\";\nimport {store} from \"../state\";\nimport PageHeader from \"../components/PageHeader\";\nimport {getQueryParameters, zipMap} from \"../utils/Utils\";\nimport Api from \"../services/Api\";\nimport {createSmartContractTransaction} from \"../state/actions/Transactions\";\n\nconst web3 = new Web3(\"http://localhost\");\n\nfunction isReadFunction(functionData){\n    const constant = _.get(functionData, ['constant'], null);\n    const stateMutability = _.get(functionData, ['stateMutability'], null);\n\n    return (stateMutability === \"view\" || stateMutability === \"pure\" || constant === true);\n}\n\nfunction initContract(abiStr, address) {\n    try {\n        const abiJSON = parseJSON(abiStr);\n\n        return new web3.eth.Contract(abiJSON, address);\n    } catch (e) {\n        return null;\n    }\n}\n\nfunction parseJSON(value) {\n    try {\n        const json = JSON.parse(value);\n\n        return json;\n    } catch (e) {\n        return null;\n    }\n}\n\nfunction isValidByteCode(value) {\n    const json = parseJSON(value);\n\n    return (_.isNil((json && json['object'])) === false);\n}\n\nfunction validateByteCode(value) {\n    return (isValidByteCode(value) || \"Invalid byte code\");\n}\n\nfunction isValidABI(value) {\n    const json = parseJSON(value);\n\n    try {\n        return (_.isNil((json && (new web3.eth.Contract(json, null)))) === false);\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction validateAddress(value) {\n    return (web3.utils.isAddress(value) || \"Invalid address\");\n}\n\nfunction validateABI(value) {\n    return (isValidABI(value) || \"Invalid ABI/JSON interface\");\n}\n\nfunction validateFunctionName(value) {\n    if (_.isNil(value) || value.length === 0) {\n        return \"Function is required\"\n    } else {\n        return true;\n    }\n}\n\nfunction validateInput(type, value) {\n    return true;\n\n    try {\n        return _.isNil(web3.eth.abi.encodeParameter(type, JSON.parse(value))) === false;\n    } catch (e) {\n        return \"Invalid value for type of \" + type;\n    }\n}\n\nfunction getFunctions(jsonInterface) {\n    const functions = _.filter(jsonInterface, function (o) {\n        return (o.type === \"function\");\n    });\n\n    return functions;\n}\n\nfunction getConstructor(jsonInterface) {\n    const constructors = _.filter(jsonInterface, function (o) {\n        return (o.type === \"constructor\");\n    });\n\n    return _.first(constructors);\n}\n\nfunction Inputs(title, inputs, formHook) {\n    const {register, errors} = formHook;\n\n    return (\n        <div>\n            {\n                inputs.length > 0 &&\n                <div>\n                    <div className=\"FormSectionTitle\">{ title }</div>\n                    <div className=\"FormColumns\">\n                        {\n                            inputs.map((value, index) => {\n                                const {name, type} = value;\n                                const argName = `arg${index}`;\n                                const key = `inputs.${argName}`;\n\n                                return (\n                                    <Fragment key={key}>\n                                        <div className=\"FormColumn\">\n                                            <div className=\"InputTitle\">{name + \" (\" + type + \")\"}</div>\n                                            <input className=\"RoundedInput\"\n                                                   placeholder={\"Enter \" + name}\n                                                   name={key}\n                                                   ref={register({\n                                                       required: \"Input \" + name + \" is required\",\n                                                       validate: (val) => {\n                                                           return validateInput(type, val)\n                                                       }\n                                                   })}\n                                            />\n                                            {_.get(errors, ['inputs', argName]) && <div\n                                                className=\"InputError\">{_.get(errors, ['inputs', argName, 'message'])}</div>}\n                                        </div>\n                                    </Fragment>\n                                );\n                            })\n                        }\n                    </div>\n                </div>\n            }\n        </div>\n    )\n}\n\nfunction DeployContractForm(props) {\n    const {onSubmit} = props;\n    const {register, handleSubmit, errors, watch} = useForm({\n        mode: 'onChange',\n    });\n    const abi = watch(\"abi\");\n    const byteCode = watch(\"byteCode\");\n    const contract = initContract(abi, null);\n    const jsonInterface = _.get(contract, ['options', 'jsonInterface']);\n    const constructor = getConstructor(jsonInterface);\n    const constructorInputs = _.get(constructor, ['inputs'], []);\n\n    window.contract = contract;\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)}>\n\n            <div className=\"FormColumns\">\n                {/*ABI/JSON Interface Section*/}\n                <div className=\"FormColumn\">\n                    <div className=\"FormSectionTitle\">ABI/JSON Interface</div>\n                    <textarea className=\"RoundedInput\"\n                              placeholder=\"Paste ABI/JSON interface\"\n                              name=\"abi\"\n                              ref={register({\n                                  required: \"Contract ABI/JSON interface is required.\",\n                                  validate: validateABI\n                              })}\n                    />\n                    {errors.abi && <div className=\"InputError\">{errors.abi.message}</div>}\n                </div>\n\n                {/*Byte Code Section*/}\n                <div className=\"FormColumn\">\n                    <div className=\"FormSectionTitle\">Byte Code</div>\n                    <textarea className=\"RoundedInput\"\n                              placeholder=\"Paste byte code\"\n                              name=\"byteCode\"\n                              ref={register({\n                                  required: \"Contract byte code is required.\",\n                                  validate: validateByteCode\n                              })}\n                    />\n                    {errors.byteCode && <div className=\"InputError\">{errors.byteCode.message}</div>}\n                </div>\n            </div>\n\n            {\n                Inputs(\"Constructor Inputs\", constructorInputs, {\n                    register: register,\n                    errors: errors\n                })\n            }\n\n            <GradientButton title=\"Deploy Contract\"\n                            style={{marginTop: 15}}\n                            disabled={(_.size(errors) > 0) || _.isNil(abi) || _.isNil(byteCode)}\n                            onClick={handleSubmit(onSubmit)}\n            />\n        </form>\n    );\n}\n\nfunction InteractWithContractForm(props) {\n    const {defaultFormValues, disabled, loading, onSubmit, onChange} = props;\n    const defaultValues = _.merge({\n        functionName: \"\"\n    }, defaultFormValues);\n\n    const {register, handleSubmit, errors, watch, setValue} = useForm({\n        mode: 'onChange',\n        defaultValues: defaultValues\n    });\n    const [lastFormState, setLastFormState] = useState(defaultValues);\n    const formState = watch(); // watching every fields in the form\n    const isDirty = (_.isEqual(lastFormState, formState) === false);\n\n    useEffect(() => {\n        if (isDirty) {\n            setLastFormState(formState);\n\n            if (onChange) {\n                onChange();\n            }\n        }\n    }, [isDirty, formState, onChange, setValue]);\n\n    const abi = watch(\"abi\");\n    const address = watch(\"address\");\n    const functionName = watch(\"functionName\");\n    const contract = initContract(abi, null);\n    const jsonInterface = _.get(contract, ['options', 'jsonInterface']);\n    const functions = getFunctions(jsonInterface) || [];\n    const functionsByName = zipMap(functions.map(({name}) => name), functions);\n    const functionData = _.get(functionsByName, [functionName]);\n    const functionInputs = _.get(functionData, ['inputs'], []);\n    const isFunctionReadOnly = isReadFunction(functionData);\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)}>\n\n            {/*Contract Name Section*/}\n            <div className=\"FormSectionTitle\">Contract Address</div>\n            <input className=\"RoundedInput\"\n                   placeholder=\"Enter contract address\"\n                   name=\"address\"\n                   ref={register({\n                       required: \"Contract address is required.\",\n                       validate: validateAddress\n                   })}\n            />\n            {errors.address && <div className=\"InputError\">{errors.address.message}</div>}\n\n\n            {/*ABI/JSON Interface Section*/}\n            <div className=\"FormColumns\">\n\n                <div className=\"FormColumn\">\n                    <div className=\"FormSectionTitle\">ABI/JSON Interface</div>\n                    <textarea className=\"RoundedInput\"\n                              placeholder=\"Paste ABI/JSON interface\"\n                              name=\"abi\"\n                              ref={register({\n                                  required: \"Contract ABI/JSON interface is required.\",\n                                  validate: validateABI\n                              })}\n                    />\n                    {errors.abi && <div className=\"InputError\">{errors.abi.message}</div>}\n                </div>\n\n                {\n                    functions.length > 0 &&\n                    <div className=\"FormColumn\">\n                        <div className=\"FormSectionTitle\">Function</div>\n                        <select name=\"functionName\"\n                                className=\"RoundedInput\"\n                                placeholder=\"Choose function\"\n                                ref={register({\n                                    required: \"Function is required.\",\n                                    validate: validateFunctionName\n                                })}\n                        onChange={() => {\n\n                        }}>\n                            <option value={\"\"}\n                                    key={\"__placeholder__\"}>\n                                Choose function\n                            </option>\n                            {\n                                functions.map((value, index) => {\n                                    const {name, type} = value;\n                                    return (\n                                        <option value={name}\n                                                key={name}\n                                        >{name}</option>\n                                    );\n                                })\n                            }\n                        </select>\n                        {errors.functionName && <div className=\"InputError\">{errors.functionName.message}</div>}\n                    </div>\n                }\n\n            </div>\n\n            {\n                Inputs(\"Function Inputs\", functionInputs, {\n                    register: register,\n                    errors: errors\n                })\n            }\n\n            <GradientButton title={isFunctionReadOnly ? \"Read\" : \"Write\"}\n                            style={{marginTop: 15}}\n                            disabled={disabled || (_.size(errors) > 0) || _.isNil(abi) || _.isNil(address) || _.isNil(functionName)}\n                            loading={loading}\n                            onClick={handleSubmit(onSubmit)}\n            />\n        </form>\n    );\n}\n\n\nclass DeployContractContent extends React.Component {\n    constructor() {\n        super();\n\n        this.defaultState = {\n            loading: false,\n        };\n\n        this.state = this.defaultState;\n    }\n\n    onSubmit = (formData) => {\n        const {abi, byteCode, inputs} = formData;\n        const byteCodeJson = parseJSON(byteCode);\n        const contract = initContract(abi, null);\n        const jsonInterface = _.get(contract, ['options', 'jsonInterface']);\n        const constructor = getConstructor(jsonInterface);\n        const constructorInputs = _.get(constructor, ['inputs'], []);\n\n        const constructorInputTypes = _.map(constructorInputs, ({name, type}) => {\n            return type;\n        });\n        const constructorInputValues = _.map(constructorInputs, ({name, type}, index) => {\n            let val = inputs[`arg${index}`];\n\n            if(type.includes('[]')){\n                return parseJSON(val);\n            }\n            else if(type === \"boolean\" || type === \"bool\"){\n                return Boolean(parseJSON(val));\n            }\n\n            return val;\n        });\n        const encodedParameters = web3.eth.abi.encodeParameters(constructorInputTypes, constructorInputValues).slice(2);\n        const from = Wallet.getWalletAddress();\n        const data = byteCodeJson.object + encodedParameters;\n        const value = 0;\n\n        store.dispatch(createSmartContractTransaction(ContractModes.DEPLOY, abi, {\n                from: from,\n                to: null,\n                data: data,\n                value: value,\n            }\n        ));\n    };\n\n    render() {\n        return (\n            <div className=\"DeployContractContent\">\n                <DeployContractForm onSubmit={this.onSubmit}/>\n            </div>\n        );\n    }\n}\n\nclass InteractWithContractContent extends React.Component {\n    constructor() {\n        super();\n\n        this.defaultState = {\n            loading: false,\n\n            result: null\n        };\n\n        this.state = this.defaultState;\n    }\n\n    onSubmit = async (formData) => {\n        const {address, abi, functionName, inputs} = formData;\n        const contract = initContract(abi, address);\n        const jsonInterface = _.get(contract, ['options', 'jsonInterface']);\n        const functions = getFunctions(jsonInterface) || [];\n        const functionsByName = zipMap(functions.map(({name}) => name), functions);\n        const functionData = _.get(functionsByName, [functionName]);\n        const functionInputs = _.get(functionData, ['inputs'], []);\n        const functionOutputs = _.get(functionData, ['outputs'], []);\n        const functionSignature = _.get(functionData, ['signature']).slice(2);\n        const isFunctionReadOnly = isReadFunction(functionData);\n\n        const inputTypes = _.map(functionInputs, ({name, type}) => {\n            return type;\n        });\n        const inputValues = _.map(functionInputs, ({name, type}, index) => {\n            let val = inputs[`arg${index}`];\n            if(type.includes('[]')){\n                return parseJSON(val);\n            }\n            else if(type === \"boolean\" || type === \"bool\"){\n                return Boolean(parseJSON(val));\n            }\n\n            return val;\n        });\n        const encodedParameters = web3.eth.abi.encodeParameters(inputTypes, inputValues).slice(2);\n\n        const feeInDTokenWei = (new BigNumber(10)).pow(12);\n        const from = Wallet.getWalletAddress();\n        const gasPrice = Dnero.getSmartContractGasPrice(); //feeInDTokenWei;\n        const gasLimit = 10000000;\n        const data = functionSignature + encodedParameters;\n        const value = 0;\n        const senderSequence = 1;\n\n        if (isFunctionReadOnly) {\n            this.setState({\n                isLoading: true,\n                callResult: null\n            });\n\n            //Call smart contract (no signing)\n            const senderSequence = 1;\n            const tx = Dnero.unsignedSmartContractTx({\n                from: from,\n                to: address,\n                data: data,\n                value: value,\n                transactionFee: gasPrice,\n                gasLimit: gasLimit\n            }, senderSequence);\n            const rawTxBytes = DneroJS.TxSigner.serializeTx(tx);\n\n            try{\n                const callResponse = await Api.callSmartContract({data: rawTxBytes.toString('hex').slice(2)}, {network: Dnero.getChainID()});\n                const callResponseJSON = await callResponse.json();\n                const result = _.get(callResponseJSON, 'result');\n                const errorMessage  = _.get(result, 'vm_error');\n\n                this.setState({\n                    callResult: _.merge(result, {\n                        outputs: functionOutputs,\n                        decodedParameters: web3.eth.abi.decodeParameters(functionOutputs, _.get(result, 'vm_return'))\n                    }),\n                    isLoading: false\n                });\n            }\n            catch (e) {\n                //Stop loading and put the error message in the vm_error like it came fromm the blockchain.\n                this.setState({\n                    isLoading: false,\n                    callResult: {\n                        vm_error: e.message\n                    }\n                });\n            }\n\n        } else {\n            store.dispatch(createSmartContractTransaction(ContractModes.INTERACT, abi, {\n                    from: from,\n                    to: address,\n                    data: data,\n                    value: value,\n                }\n            ));\n        }\n    };\n\n    onChange = () => {\n        this.setState({\n            callResult: null\n        });\n    };\n\n    render() {\n        const {defaultFormValues} = this.props;\n        const {isLoading, callResult} = this.state;\n        const error = _.get(callResult, 'vm_error');\n\n        return (\n            <div className=\"InteractWithContractContent\">\n                <InteractWithContractForm defaultFormValues={defaultFormValues}\n                                          onSubmit={this.onSubmit}\n                                          onChange={this.onChange}\n                                          loading={isLoading}\n                                          disabled={isLoading}\n                />\n                {\n                    error &&\n                    <div className=\"InputError\"\n                         style={{\n                             marginTop: 20\n                         }}>\n                        {error}\n                    </div>\n                }\n                {\n                    callResult &&\n                    <div style={{\n                        marginTop: 20\n                    }}>\n                        <div>\n                            <div className=\"InputTitle\">Raw Result</div>\n                            <input className=\"RoundedInput\"\n                                   name={\"vm_return\"}\n                                   value={_.get(callResult, 'vm_return')}\n                                   readOnly\n                            />\n                        </div>\n                    </div>\n                }\n                {\n                    callResult &&\n                    <div className=\"FormColumns\">\n                        {\n                            _.get(callResult, 'outputs', []).map((value, index) => {\n                                const {name, type} = value;\n                                return (\n                                    <Fragment key={name}>\n                                        <div className=\"FormColumn\">\n                                            <div className=\"InputTitle\">{name + \" (\" + type + \")\"}</div>\n                                            <input className=\"RoundedInput\"\n                                                   value={_.get(callResult, ['decodedParameters', index])}\n                                                   readOnly\n                                            />\n                                        </div>\n                                    </Fragment>\n                                );\n                            })\n                        }\n                    </div>\n                }\n            </div>\n        );\n    }\n}\n\n\nclass ContractPage extends React.Component {\n    render() {\n        let contractMode = this.props.match.params.contractMode;\n        let queryParams = getQueryParameters(this.props.history.location.search);\n        if (queryParams['abi']) {\n            queryParams['abi'] = atob(queryParams['abi']);\n        }\n\n        return (\n            <div className=\"ContractPage\">\n                <div className=\"ContractPage__detail-view\">\n                    <PageHeader title={null}\n                                sticky={true}>\n                        <TabBar centered={true}\n                                condensed={false}\n                                style={{width: \"100%\"}}\n                        >\n                            <TabBarItem\n                                title=\"Deploy Contract\"\n                                href={\"/wallet/contract/\" + ContractModes.DEPLOY}\n                            />\n                            <TabBarItem\n                                title=\"Interact with Contract\"\n                                href={\"/wallet/contract/\" + ContractModes.INTERACT}\n                            />\n                        </TabBar>\n                    </PageHeader>\n\n                    {\n                        (contractMode === ContractModes.DEPLOY) &&\n                        <DeployContractContent/>\n                    }\n                    {\n                        (contractMode === ContractModes.INTERACT) &&\n                        <InteractWithContractContent defaultFormValues={queryParams}/>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {};\n};\n\nexport default connect(mapStateToProps)(ContractPage);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}