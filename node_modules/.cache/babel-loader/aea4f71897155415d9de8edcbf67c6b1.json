{"ast":null,"code":"import _objectSpread from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import ObservableStore from'./ObservableStore';/**\n * An ObservableStore that can composes a flat\n * structure of child stores based on configuration\n */var ComposableObservableStore=/*#__PURE__*/function(_ObservableStore){_inherits(ComposableObservableStore,_ObservableStore);var _super=_createSuper(ComposableObservableStore);/**\n     * Create a new store\n     *\n     * @param {Object} [initState] - The initial store state\n     * @param {Object} [config] - Map of internal state keys to child stores\n     */function ComposableObservableStore(initState,config){var _this;_classCallCheck(this,ComposableObservableStore);_this=_super.call(this,initState);_this.updateStructure(config);return _this;}/**\n     * Composes a new internal store subscription structure\n     *\n     * @param {Object} [config] - Map of internal state keys to child stores\n     */_createClass(ComposableObservableStore,[{key:\"updateStructure\",value:function updateStructure(config){var _this2=this;this.config=config;this.removeAllListeners();var _loop=function _loop(key){if(Object.prototype.hasOwnProperty.call(config,key)){config[key].subscribe(function(state){_this2.updateState(_defineProperty({},key,state));});}};for(var key in config){_loop(key);}}/**\n     * Merges all child store state into a single object rather than\n     * returning an object keyed by child store class name\n     *\n     * @returns {Object} Object containing merged child store state\n     */},{key:\"getFlatState\",value:function getFlatState(){var flatState={};for(var key in this.config){if(Object.prototype.hasOwnProperty.call(this.config,key)){var controller=this.config[key];var state=controller.getState?controller.getState():controller.state;flatState=_objectSpread(_objectSpread({},flatState),state);}}return flatState;}}]);return ComposableObservableStore;}(ObservableStore);export{ComposableObservableStore as default};","map":{"version":3,"names":["ObservableStore","ComposableObservableStore","initState","config","updateStructure","removeAllListeners","key","Object","prototype","hasOwnProperty","call","subscribe","state","updateState","flatState","controller","getState"],"sources":["/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/utils/ComposableObservableStore.js"],"sourcesContent":["import ObservableStore from './ObservableStore'\n\n/**\n * An ObservableStore that can composes a flat\n * structure of child stores based on configuration\n */\nexport default class ComposableObservableStore extends ObservableStore {\n    /**\n     * Create a new store\n     *\n     * @param {Object} [initState] - The initial store state\n     * @param {Object} [config] - Map of internal state keys to child stores\n     */\n    constructor(initState, config) {\n        super(initState);\n        this.updateStructure(config);\n    }\n\n    /**\n     * Composes a new internal store subscription structure\n     *\n     * @param {Object} [config] - Map of internal state keys to child stores\n     */\n    updateStructure(config) {\n        this.config = config;\n        this.removeAllListeners();\n        for (const key in config) {\n            if (Object.prototype.hasOwnProperty.call(config, key)) {\n                config[key].subscribe((state) => {\n                    this.updateState({ [key]: state });\n                });\n            }\n        }\n    }\n\n    /**\n     * Merges all child store state into a single object rather than\n     * returning an object keyed by child store class name\n     *\n     * @returns {Object} Object containing merged child store state\n     */\n    getFlatState() {\n        let flatState = {};\n        for (const key in this.config) {\n            if (Object.prototype.hasOwnProperty.call(this.config, key)) {\n                const controller = this.config[key];\n                const state = controller.getState\n                    ? controller.getState()\n                    : controller.state;\n                flatState = { ...flatState, ...state };\n            }\n        }\n        return flatState;\n    }\n}\n"],"mappings":"q9BAAA,MAAOA,gBAAP,KAA4B,mBAA5B,CAEA;AACA;AACA;AACA,G,GACqBC,0B,kJACjB;AACJ;AACA;AACA;AACA;AACA,OACI,mCAAYC,SAAZ,CAAuBC,MAAvB,CAA+B,2DAC3B,uBAAMD,SAAN,EACA,MAAKE,eAAL,CAAqBD,MAArB,EAF2B,aAG9B,CAED;AACJ;AACA;AACA;AACA,O,qEACI,yBAAgBA,MAAhB,CAAwB,iBACpB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKE,kBAAL,GAFoB,yBAGTC,GAHS,EAIhB,GAAIC,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,MAArC,CAA6CG,GAA7C,CAAJ,CAAuD,CACnDH,MAAM,CAACG,GAAD,CAAN,CAAYK,SAAZ,CAAsB,SAACC,KAAD,CAAW,CAC7B,MAAI,CAACC,WAAL,oBAAoBP,GAApB,CAA0BM,KAA1B,GACH,CAFD,EAGH,CARe,EAGpB,IAAK,GAAMN,IAAX,GAAkBH,OAAlB,CAA0B,OAAfG,GAAe,EAMzB,CACJ,CAED;AACJ;AACA;AACA;AACA;AACA,O,4BACI,uBAAe,CACX,GAAIQ,UAAS,CAAG,EAAhB,CACA,IAAK,GAAMR,IAAX,GAAkB,MAAKH,MAAvB,CAA+B,CAC3B,GAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC,KAAKP,MAA1C,CAAkDG,GAAlD,CAAJ,CAA4D,CACxD,GAAMS,WAAU,CAAG,KAAKZ,MAAL,CAAYG,GAAZ,CAAnB,CACA,GAAMM,MAAK,CAAGG,UAAU,CAACC,QAAX,CACRD,UAAU,CAACC,QAAX,EADQ,CAERD,UAAU,CAACH,KAFjB,CAGAE,SAAS,gCAAQA,SAAR,EAAsBF,KAAtB,CAAT,CACH,CACJ,CACD,MAAOE,UAAP,CACH,C,uCA/CkDd,e,SAAlCC,yB"},"metadata":{},"sourceType":"module"}