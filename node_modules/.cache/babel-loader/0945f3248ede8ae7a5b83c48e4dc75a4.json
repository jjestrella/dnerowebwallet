{"ast":null,"code":"import _asyncToGenerator from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";function _regeneratorRuntime(){\"use strict\";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return exports;};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol=\"function\"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||\"@@iterator\",asyncIteratorSymbol=$Symbol.asyncIterator||\"@@asyncIterator\",toStringTagSymbol=$Symbol.toStringTag||\"@@toStringTag\";function define(obj,key,value){return Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}),obj[key];}try{define({},\"\");}catch(err){define=function define(obj,key,value){return obj[key]=value;};}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=function(innerFn,self,context){var state=\"suspendedStart\";return function(method,arg){if(\"executing\"===state)throw new Error(\"Generator is already running\");if(\"completed\"===state){if(\"throw\"===method)throw arg;return doneResult();}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult;}}if(\"next\"===context.method)context.sent=context._sent=context.arg;else if(\"throw\"===context.method){if(\"suspendedStart\"===state)throw state=\"completed\",context.arg;context.dispatchException(context.arg);}else\"return\"===context.method&&context.abrupt(\"return\",context.arg);state=\"executing\";var record=tryCatch(innerFn,self,context);if(\"normal\"===record.type){if(state=context.done?\"completed\":\"suspendedYield\",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done};}\"throw\"===record.type&&(state=\"completed\",context.method=\"throw\",context.arg=record.arg);}};}(innerFn,self,context),generator;}function tryCatch(fn,obj,arg){try{return{type:\"normal\",arg:fn.call(obj,arg)};}catch(err){return{type:\"throw\",arg:err};}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,function(){return this;});var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){[\"next\",\"throw\",\"return\"].forEach(function(method){define(prototype,method,function(arg){return this._invoke(method,arg);});});}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if(\"throw\"!==record.type){var result=record.arg,value=result.value;return value&&\"object\"==typeof value&&hasOwn.call(value,\"__await\")?PromiseImpl.resolve(value.__await).then(function(value){invoke(\"next\",value,resolve,reject);},function(err){invoke(\"throw\",err,resolve,reject);}):PromiseImpl.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result);},function(error){return invoke(\"throw\",error,resolve,reject);});}reject(record.arg);}var previousPromise;this._invoke=function(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl(function(resolve,reject){invoke(method,arg,resolve,reject);});}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg();};}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(undefined===method){if(context.delegate=null,\"throw\"===context.method){if(delegate.iterator.return&&(context.method=\"return\",context.arg=undefined,maybeInvokeDelegate(delegate,context),\"throw\"===context.method))return ContinueSentinel;context.method=\"throw\",context.arg=new TypeError(\"The iterator does not provide a 'throw' method\");}return ContinueSentinel;}var record=tryCatch(method,delegate.iterator,context.arg);if(\"throw\"===record.type)return context.method=\"throw\",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,\"return\"!==context.method&&(context.method=\"next\",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method=\"throw\",context.arg=new TypeError(\"iterator result is not an object\"),context.delegate=null,ContinueSentinel);}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry);}function resetTryEntry(entry){var record=entry.completion||{};record.type=\"normal\",delete record.arg,entry.completion=record;}function Context(tryLocsList){this.tryEntries=[{tryLoc:\"root\"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0);}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if(\"function\"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;){if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;}return next.value=undefined,next.done=!0,next;};return next.next=next;}}return{next:doneResult};}function doneResult(){return{value:undefined,done:!0};}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(Gp,\"constructor\",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,\"constructor\",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,\"GeneratorFunction\"),exports.isGeneratorFunction=function(genFun){var ctor=\"function\"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||\"GeneratorFunction\"===(ctor.displayName||ctor.name));},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,\"GeneratorFunction\")),genFun.prototype=Object.create(Gp),genFun;},exports.awrap=function(arg){return{__await:arg};},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,function(){return this;}),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next();});},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,\"Generator\"),define(Gp,iteratorSymbol,function(){return this;}),define(Gp,\"toString\",function(){return\"[object Generator]\";}),exports.keys=function(object){var keys=[];for(var key in object){keys.push(key);}return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next;}return next.done=!0,next;};},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this){\"t\"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined);}},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if(\"throw\"===rootRecord.type)throw rootRecord.arg;return this.rval;},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type=\"throw\",record.arg=exception,context.next=loc,caught&&(context.method=\"next\",context.arg=undefined),!!caught;}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if(\"root\"===entry.tryLoc)return handle(\"end\");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,\"catchLoc\"),hasFinally=hasOwn.call(entry,\"finallyLoc\");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);}else{if(!hasFinally)throw new Error(\"try statement without catch or finally\");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc);}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,\"finallyLoc\")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break;}}finallyEntry&&(\"break\"===type||\"continue\"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method=\"next\",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record);},complete:function complete(record,afterLoc){if(\"throw\"===record.type)throw record.arg;return\"break\"===record.type||\"continue\"===record.type?this.next=record.arg:\"return\"===record.type?(this.rval=this.arg=record.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel;},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel;}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if(\"throw\"===record.type){var thrown=record.arg;resetTryEntry(entry);}return thrown;}}throw new Error(\"illegal catch attempt\");},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},\"next\"===this.method&&(this.arg=undefined),ContinueSentinel;}},exports;}import _ from'lodash';import Networks from'../constants/Networks';import BigNumber from'bignumber.js';import{Ten18}from'@dnerolabs/dnero-js/src/constants';import{DefaultAssets,getAllAssets,tokenToAsset}from\"../constants/assets\";import*as dnerojs from\"@dnerolabs/dnero-js\";import{DDropStakingABI,DNC20ABI}from\"../constants/contracts\";import{StakePurposeForDDROP,DDropAddressByChainId,DDropStakingAddressByChainId}from\"../constants\";/**\n * Returns a new object with vals mapped to keys\n * @param {Array} keys\n * @param {Array} vals\n * @return {Object}\n */export function zipMap(keys,vals){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(keys.map(function(key,index){return _defineProperty({},key,vals[index]);}))));}export function trimWhitespaceAndNewlines(str){return str.trim().replace(new RegExp('\\s?\\r?\\n','g'),'');}export function hasValidDecimalPlaces(str,maxDecimalPlaces){if(str===null){return true;}//Ensure it is a string\nvar ensureStr=''+str;var decimalSplit=ensureStr.split('.');if(decimalSplit.length>0){var decimals=decimalSplit[decimalSplit.length-1];return decimals.length<=maxDecimalPlaces;}return true;}export function downloadFile(filename,contents){var element=document.createElement('a');element.setAttribute('href','data:text/plain;charset=utf-8,'+encodeURIComponent(contents));element.setAttribute('download',filename);element.style.display='none';document.body.appendChild(element);element.click();document.body.removeChild(element);}export function copyToClipboard(str){//https://gist.githubusercontent.com/Chalarangelo/4ff1e8c0ec03d9294628efbae49216db/raw/cbd2d8877d4c5f2678ae1e6bb7cb903205e5eacc/copyToClipboard.js\nvar el=document.createElement('textarea');// Create a <textarea> element\nel.value=str;// Set its value to the string that you want copied\nel.setAttribute('readonly','');// Make it readonly to be tamper-proof\nel.style.position='absolute';el.style.left='-9999px';// Move outside the screen to make it invisible\ndocument.body.appendChild(el);// Append the <textarea> element to the HTML document\nvar selected=document.getSelection().rangeCount>0// Check if there is any content selected previously\n?document.getSelection().getRangeAt(0)// Store selection if found\n:false;// Mark as false to know no selection existed before\nel.select();// Select the <textarea> content\ndocument.execCommand('copy');// Copy - only works as a result of a user action (e.g. click events)\ndocument.body.removeChild(el);// Remove the <textarea> element\nif(selected){// If a selection existed before copying\ndocument.getSelection().removeAllRanges();// Unselect everything on the HTML document\ndocument.getSelection().addRange(selected);// Restore the original selection\n}}export function onLine(){var online=true;try{online=window.navigator.onLine;}catch(e){online=true;}return online;}export var truncate=function truncate(){var hash=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;return hash.slice(0,length+2)+'...'+hash.slice(length*-1);};export function legacyTruncate(fullStr,strLen,separator){if(!fullStr){return fullStr;}if(fullStr.length<=strLen)return fullStr;separator=separator||'...';var sepLen=separator.length,charsToShow=strLen-sepLen,frontChars=Math.ceil(charsToShow/2),backChars=Math.floor(charsToShow/2);return fullStr.substr(0,frontChars)+separator+fullStr.substr(fullStr.length-backChars);}export function numberWithCommas(x){var parts=x.toString().split(\".\");parts[0]=parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");return parts.join(\".\");}export function getQueryParameters(str){var searchStr=str||document.location.search;if(_.isNil(searchStr)||searchStr.length===0){return{};}else{return searchStr.replace(/(^\\?)/,'').split(\"&\").map(function(n){return n=n.split(\"=\"),this[n[0]]=n[1],this;}.bind({}))[0];}}export function chainIDStringToNumber(chainIDstr){switch(chainIDstr){case Networks.DNERO_MAINNET:return 361;case Networks.DNERO_PRIVATENET:return 366;case Networks.DNERO_TESTNET:return 365;}return 0;}export var formatDNC20TokenAmountToLargestUnit=function formatDNC20TokenAmountToLargestUnit(number,decimals){var bn=new BigNumber(number);var DecimalsBN=new BigNumber(10).pow(decimals);// Round down\nvar fixed=bn.dividedBy(DecimalsBN).toString(10);return numberWithCommas(fixed);};export var formatNativeTokenAmountToLargestUnit=function formatNativeTokenAmountToLargestUnit(number){var bn=new BigNumber(number);var fixed=bn.dividedBy(Ten18).toString(10);return numberWithCommas(fixed);};export var toDNC20TokenSmallestUnit=function toDNC20TokenSmallestUnit(number,decimals){var bn=new BigNumber(number);var DecimalsBN=new BigNumber(10).pow(decimals);return bn.multipliedBy(DecimalsBN);};export var toNativeTokenSmallestUnit=function toNativeTokenSmallestUnit(number){var bn=new BigNumber(number);return bn.multipliedBy(Ten18);};export var toDNC20TokenLargestUnit=function toDNC20TokenLargestUnit(number,decimals){var bn=new BigNumber(number);var DecimalsBN=new BigNumber(10).pow(decimals);return bn.dividedBy(DecimalsBN);};export var toNativeTokenLargestUnit=function toNativeTokenLargestUnit(number){var bn=new BigNumber(number);return bn.dividedBy(Ten18);};export var isValidAmount=function isValidAmount(selectedAccount,asset,amount){var amountBN=null;var balanceBN=null;if(_.isNil(asset)){// Return as valid so we don't show errors before asset is picked.\nreturn true;}if(asset.name==='Dnero'){amountBN=toNativeTokenSmallestUnit(''+amount);balanceBN=new BigNumber(selectedAccount.balances['dnerowei']);}else if(asset.name==='Dnero Token'){amountBN=toNativeTokenSmallestUnit(''+amount);balanceBN=new BigNumber(selectedAccount.balances['dtokenwei']);}else{// TNT-20 token\namountBN=toDNC20TokenSmallestUnit(''+amount,asset.decimals);balanceBN=new BigNumber(selectedAccount.balances[asset.contractAddress]);}return amountBN.lte(balanceBN);};export var getAssetBalance=function getAssetBalance(selectedAccount,asset){if(asset.name==='Dnero'){return formatNativeTokenAmountToLargestUnit(selectedAccount.balances['dnerowei']);}if(asset.name==='Dnero Token'){return formatNativeTokenAmountToLargestUnit(selectedAccount.balances['dtokenwei']);}var balance=selectedAccount.balances[asset.contractAddress]||'0';return formatDNC20TokenAmountToLargestUnit(balance,asset.decimals);};export var formDataToTransaction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(transactionType,txFormData,dneroWalletState){var accounts,selectedAddress,selectedAccount,tokens,chainId,assets,to,assetId,amount,asset,dnc20Contract,amountBN,txData,holder,purpose,_amount,purposeInt,dDropStakingAddress,ddropStakingContract,percentageToUnstake,dnc20stakes,balanceStr,balanceBN,_amountBN,unstakeTx,_txData,_holder,holderSummary,_purpose,_amount2,_purposeInt,_txData2,_txData3,_txData4,dDropAddress,_dDropStakingAddress,ddropContract,_ddropStakingContract,assetsById,dDropAsset,_amountBN2,approveTx,stakeTx,address,_dDropStakingAddress2,_ddropStakingContract2,delegateTx;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:accounts=dneroWalletState.accounts;selectedAddress=dneroWalletState.selectedAddress;selectedAccount=accounts[selectedAddress];tokens=dneroWalletState.tokens;chainId=dneroWalletState.network.chainId;assets=getAllAssets(chainId,tokens);if(!(transactionType==='send')){_context.next=19;break;}to=txFormData.to,assetId=txFormData.assetId,amount=txFormData.amount;asset=_.find(assets,function(a){return a.id===assetId;});if(!asset.contractAddress){_context.next=17;break;}// DNC20 token\n// TODO ensure they have the balance\ndnc20Contract=new dnerojs.Contract(asset.contractAddress,DNC20ABI,null);amountBN=toDNC20TokenSmallestUnit(amount,asset.decimals);_context.next=14;return dnc20Contract.populateTransaction.transfer(to,amountBN.toString());case 14:return _context.abrupt(\"return\",_context.sent);case 17:// Native token\ntxData={from:selectedAddress,outputs:[{address:to,dneroWei:assetId==='dnero'?dnerojs.utils.toWei(amount):'0',dtokenWei:assetId==='dtoken'?dnerojs.utils.toWei(amount):'0'}]};return _context.abrupt(\"return\",new dnerojs.transactions.SendTransaction(txData));case 19:if(!(transactionType==='withdraw-stake')){_context.next=38;break;}holder=txFormData.holder,purpose=txFormData.purpose,_amount=txFormData.amount;purposeInt=parseInt(purpose);if(!(purposeInt===StakePurposeForDDROP)){_context.next=36;break;}dDropStakingAddress=DDropStakingAddressByChainId[chainId];ddropStakingContract=new dnerojs.Contract(dDropStakingAddress,DDropStakingABI,null);percentageToUnstake=parseFloat(_amount)/100;dnc20stakes=_.get(selectedAccount,['dnc20Stakes'],{});balanceStr=_.get(dnc20stakes,'ddrop.balance','0');balanceBN=new BigNumber(balanceStr);_amountBN=balanceBN.multipliedBy(percentageToUnstake).integerValue();_context.next=32;return ddropStakingContract.populateTransaction.unstake(_amountBN.toString());case 32:unstakeTx=_context.sent;return _context.abrupt(\"return\",unstakeTx);case 36:_txData={holder:holder,purpose:purpose};return _context.abrupt(\"return\",new dnerojs.transactions.WithdrawStakeTransaction(_txData));case 38:if(!(transactionType==='deposit-stake')){_context.next=75;break;}_holder=txFormData.holder,holderSummary=txFormData.holderSummary,_purpose=txFormData.purpose,_amount2=txFormData.amount;_purposeInt=parseInt(_purpose);if(!(_purposeInt===dnerojs.constants.StakePurpose.StakeForValidator)){_context.next=46;break;}_txData2={holder:_holder,purpose:_purposeInt,amount:dnerojs.utils.toWei(_amount2)};return _context.abrupt(\"return\",new dnerojs.transactions.DepositStakeTransaction(_txData2));case 46:if(!(_purposeInt===dnerojs.constants.StakePurpose.StakeForSentry)){_context.next=51;break;}_txData3={holderSummary:holderSummary,purpose:_purposeInt,amount:dnerojs.utils.toWei(_amount2)};return _context.abrupt(\"return\",new dnerojs.transactions.DepositStakeV2Transaction(_txData3));case 51:if(!(_purposeInt===dnerojs.constants.StakePurpose.StakeForEliteEdge)){_context.next=56;break;}_txData4={holderSummary:holderSummary,purpose:_purposeInt,amount:dnerojs.utils.toWei(_amount2)};return _context.abrupt(\"return\",new dnerojs.transactions.DepositStakeV2Transaction(_txData4));case 56:if(!(_purposeInt===StakePurposeForDDROP)){_context.next=73;break;}dDropAddress=DDropAddressByChainId[chainId];_dDropStakingAddress=DDropStakingAddressByChainId[chainId];ddropContract=new dnerojs.Contract(dDropAddress,DNC20ABI,null);_ddropStakingContract=new dnerojs.Contract(_dDropStakingAddress,DDropStakingABI,null);assetsById=_.keyBy(assets,'id');dDropAsset=assetsById[dDropAddress];_amountBN2=toDNC20TokenSmallestUnit(_amount2,dDropAsset.decimals);_context.next=66;return ddropContract.populateTransaction.approve(_dDropStakingAddress,_amountBN2.toString());case 66:approveTx=_context.sent;_context.next=69;return _ddropStakingContract.populateTransaction.stake(_amountBN2.toString());case 69:stakeTx=_context.sent;// We are sending the approve TX in the background which fails because the amount hasn't been approved yet...so we will hardcode this gas limit for now\nstakeTx.gasLimit=150000;stakeTx.dependencies=[approveTx];return _context.abrupt(\"return\",stakeTx);case 73:_context.next=83;break;case 75:if(!(transactionType==='delegate-ddrop-vote')){_context.next=83;break;}address=txFormData.address;_dDropStakingAddress2=DDropStakingAddressByChainId[chainId];_ddropStakingContract2=new dnerojs.Contract(_dDropStakingAddress2,DDropStakingABI,null);_context.next=81;return _ddropStakingContract2.populateTransaction.delegate(address);case 81:delegateTx=_context.sent;return _context.abrupt(\"return\",delegateTx);case 83:case\"end\":return _context.stop();}}},_callee);}));return function formDataToTransaction(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();export var transactionTypeToName=function transactionTypeToName(txType){if(_.isNil(txType)){return null;}switch(txType){case dnerojs.constants.TxType.Send:return'Send';case dnerojs.constants.TxType.SmartContract:return'Call Contract';case dnerojs.constants.TxType.DepositStake:return'Deposit Stake';case dnerojs.constants.TxType.DepositStakeV2:return'Deposit Stake';case dnerojs.constants.TxType.WithdrawStake:return'Withdraw Stake';default:return'Unknown type';}};export var transactionRequestToTransactionType=function transactionRequestToTransactionType(transactionRequest){var txType=_.get(transactionRequest,'txType');var txData=_.get(transactionRequest,'txData');try{if(txType===dnerojs.constants.TxType.SmartContract&&_.isNil(_.get(txData,'to'))){return'Deploy Contract';}var contractData=_.get(txData,'data');var dnc20Contract=new dnerojs.Contract(null,DNC20ABI,null);var data=dnc20Contract.interface.decodeFunctionData('transfer(address,uint256)',contractData);return'Transfer Token';}catch(e){}return transactionTypeToName(txType);};export var isHolderSummary=function isHolderSummary(holderSummary){if(holderSummary){var expectedLen=458;if(holderSummary.startsWith('0x')){expectedLen=expectedLen+2;}return holderSummary.length===expectedLen;}else{return false;}};export function trimDecimalPlaces(x,maxDecimals){var parts=x.split('.');var newFractional='';var foundNonZero=false;_.map(parts[1],function(char,idx){if(foundNonZero){return;}if(idx+1>maxDecimals){return;}if(char!=='0'){foundNonZero=true;}newFractional=newFractional+char;});parts[1]=newFractional;return parts.join('.');}export var sleep=function sleep(ms){return new Promise(function(r){return setTimeout(r,ms);});};","map":{"version":3,"names":["_","Networks","BigNumber","Ten18","DefaultAssets","getAllAssets","tokenToAsset","dnerojs","DDropStakingABI","DNC20ABI","StakePurposeForDDROP","DDropAddressByChainId","DDropStakingAddressByChainId","zipMap","keys","vals","Object","assign","map","key","index","trimWhitespaceAndNewlines","str","trim","replace","RegExp","hasValidDecimalPlaces","maxDecimalPlaces","ensureStr","decimalSplit","split","length","decimals","downloadFile","filename","contents","element","document","createElement","setAttribute","encodeURIComponent","style","display","body","appendChild","click","removeChild","copyToClipboard","el","value","position","left","selected","getSelection","rangeCount","getRangeAt","select","execCommand","removeAllRanges","addRange","onLine","online","window","navigator","e","truncate","hash","slice","legacyTruncate","fullStr","strLen","separator","sepLen","charsToShow","frontChars","Math","ceil","backChars","floor","substr","numberWithCommas","x","parts","toString","join","getQueryParameters","searchStr","location","search","isNil","n","bind","chainIDStringToNumber","chainIDstr","DNERO_MAINNET","DNERO_PRIVATENET","DNERO_TESTNET","formatDNC20TokenAmountToLargestUnit","number","bn","DecimalsBN","pow","fixed","dividedBy","formatNativeTokenAmountToLargestUnit","toDNC20TokenSmallestUnit","multipliedBy","toNativeTokenSmallestUnit","toDNC20TokenLargestUnit","toNativeTokenLargestUnit","isValidAmount","selectedAccount","asset","amount","amountBN","balanceBN","name","balances","contractAddress","lte","getAssetBalance","balance","formDataToTransaction","transactionType","txFormData","dneroWalletState","accounts","selectedAddress","tokens","chainId","network","assets","to","assetId","find","a","id","dnc20Contract","Contract","populateTransaction","transfer","txData","from","outputs","address","dneroWei","utils","toWei","dtokenWei","transactions","SendTransaction","holder","purpose","purposeInt","parseInt","dDropStakingAddress","ddropStakingContract","percentageToUnstake","parseFloat","dnc20stakes","get","balanceStr","integerValue","unstake","unstakeTx","WithdrawStakeTransaction","holderSummary","constants","StakePurpose","StakeForValidator","DepositStakeTransaction","StakeForSentry","DepositStakeV2Transaction","StakeForEliteEdge","dDropAddress","ddropContract","assetsById","keyBy","dDropAsset","approve","approveTx","stake","stakeTx","gasLimit","dependencies","delegate","delegateTx","transactionTypeToName","txType","TxType","Send","SmartContract","DepositStake","DepositStakeV2","WithdrawStake","transactionRequestToTransactionType","transactionRequest","contractData","data","interface","decodeFunctionData","isHolderSummary","expectedLen","startsWith","trimDecimalPlaces","maxDecimals","newFractional","foundNonZero","char","idx","sleep","ms","Promise","r","setTimeout"],"sources":["/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/utils/Utils.js"],"sourcesContent":["import _ from 'lodash';\nimport Networks from '../constants/Networks'\nimport BigNumber from 'bignumber.js';\nimport {Ten18} from '@dnerolabs/dnero-js/src/constants';\nimport {DefaultAssets, getAllAssets, tokenToAsset} from \"../constants/assets\";\nimport * as dnerojs from \"@dnerolabs/dnero-js\";\nimport {DDropStakingABI, DNC20ABI} from \"../constants/contracts\";\nimport {StakePurposeForDDROP, DDropAddressByChainId, DDropStakingAddressByChainId} from \"../constants\";\n\n\n/**\n * Returns a new object with vals mapped to keys\n * @param {Array} keys\n * @param {Array} vals\n * @return {Object}\n */\nexport function zipMap(keys, vals){\n    return Object.assign({}, ...keys.map((key, index) => ({[key]: vals[index]})));\n}\n\nexport function trimWhitespaceAndNewlines(str){\n    return str.trim().replace(new RegExp('\\s?\\r?\\n','g'), '')\n}\n\nexport function hasValidDecimalPlaces(str, maxDecimalPlaces){\n    if(str === null){\n        return true;\n    }\n\n    //Ensure it is a string\n    var ensureStr = '' + str;\n\n    var decimalSplit = ensureStr.split('.');\n\n    if(decimalSplit.length > 0){\n        var decimals = decimalSplit[decimalSplit.length - 1];\n\n        return (decimals.length <= maxDecimalPlaces);\n    }\n    return true;\n}\n\nexport function downloadFile(filename, contents){\n    let element = document.createElement('a');\n\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(contents));\n    element.setAttribute('download', filename);\n    element.style.display = 'none';\n\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n}\n\nexport function copyToClipboard(str){\n    //https://gist.githubusercontent.com/Chalarangelo/4ff1e8c0ec03d9294628efbae49216db/raw/cbd2d8877d4c5f2678ae1e6bb7cb903205e5eacc/copyToClipboard.js\n\n    const el = document.createElement('textarea');  // Create a <textarea> element\n    el.value = str;                                 // Set its value to the string that you want copied\n    el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof\n    el.style.position = 'absolute';\n    el.style.left = '-9999px';                      // Move outside the screen to make it invisible\n    document.body.appendChild(el);                  // Append the <textarea> element to the HTML document\n    const selected =\n        document.getSelection().rangeCount > 0        // Check if there is any content selected previously\n            ? document.getSelection().getRangeAt(0)     // Store selection if found\n            : false;                                    // Mark as false to know no selection existed before\n    el.select();                                    // Select the <textarea> content\n    document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)\n    document.body.removeChild(el);                  // Remove the <textarea> element\n    if (selected) {                                 // If a selection existed before copying\n        document.getSelection().removeAllRanges();    // Unselect everything on the HTML document\n        document.getSelection().addRange(selected);   // Restore the original selection\n    }\n}\n\nexport function onLine(){\n    let online = true;\n\n    try {\n        online = window.navigator.onLine;\n    }\n    catch (e) {\n        online = true;\n    }\n\n    return online;\n}\n\nexport const truncate = (hash = '', length= 4) => {\n    return hash.slice(0, (length + 2)) + '...' + hash.slice((length * -1));\n};\n\nexport function legacyTruncate(fullStr, strLen, separator) {\n    if(!fullStr){\n        return fullStr;\n    }\n\n    if (fullStr.length <= strLen) return fullStr;\n\n    separator = separator || '...';\n\n    var sepLen = separator.length,\n        charsToShow = strLen - sepLen,\n        frontChars = Math.ceil(charsToShow/2),\n        backChars = Math.floor(charsToShow/2);\n\n    return fullStr.substr(0, frontChars) +\n        separator +\n        fullStr.substr(fullStr.length - backChars);\n}\n\nexport function numberWithCommas(x) {\n    var parts = x.toString().split(\".\");\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    return parts.join(\".\");\n}\n\nexport function getQueryParameters(str) {\n    const searchStr = (str || document.location.search);\n\n    if(_.isNil(searchStr) || searchStr.length === 0){\n        return {};\n    }\n    else{\n        return searchStr.replace(/(^\\?)/,'').split(\"&\").map(function(n){return n = n.split(\"=\"),this[n[0]] = n[1],this}.bind({}))[0];\n    }\n}\n\nexport function chainIDStringToNumber(chainIDstr) {\n    switch(chainIDstr) {\n        case Networks.DNERO_MAINNET:\n            return 361;\n        case Networks.DNERO_PRIVATENET:\n            return 366;\n        case Networks.DNERO_TESTNET:\n            return 365;\n    }\n    return 0;\n}\n\n\n\n\n\nexport const formatDNC20TokenAmountToLargestUnit = (number, decimals ) => {\n    const bn = new BigNumber(number);\n    const DecimalsBN = (new BigNumber(10)).pow(decimals);\n    // Round down\n    const fixed = bn.dividedBy(DecimalsBN).toString(10);\n\n    return numberWithCommas(fixed);\n};\n\nexport const formatNativeTokenAmountToLargestUnit = (number ) => {\n    const bn = new BigNumber(number);\n    const fixed = bn.dividedBy(Ten18).toString(10);\n\n    return numberWithCommas(fixed);\n};\n\nexport const toDNC20TokenSmallestUnit = (number, decimals ) => {\n    const bn = new BigNumber(number);\n    const DecimalsBN = (new BigNumber(10)).pow(decimals);\n    return bn.multipliedBy(DecimalsBN);\n};\n\nexport const toNativeTokenSmallestUnit = (number ) => {\n    const bn = new BigNumber(number);\n    return bn.multipliedBy(Ten18);\n};\n\nexport const toDNC20TokenLargestUnit = (number, decimals ) => {\n    const bn = new BigNumber(number);\n    const DecimalsBN = (new BigNumber(10)).pow(decimals);\n    return bn.dividedBy(DecimalsBN);\n};\n\nexport const toNativeTokenLargestUnit = (number ) => {\n    const bn = new BigNumber(number);\n    return bn.dividedBy(Ten18);\n};\n\nexport const isValidAmount = (selectedAccount, asset, amount) => {\n    let amountBN = null;\n    let balanceBN = null;\n\n    if(_.isNil(asset)){\n        // Return as valid so we don't show errors before asset is picked.\n        return true;\n    }\n\n    if(asset.name === 'Dnero'){\n        amountBN = toNativeTokenSmallestUnit('' + amount);\n        balanceBN = new BigNumber(selectedAccount.balances['dnerowei']);\n    }\n    else if(asset.name === 'Dnero Token'){\n        amountBN = toNativeTokenSmallestUnit('' + amount);\n        balanceBN = new BigNumber(selectedAccount.balances['dtokenwei']);\n    }\n    else{\n        // TNT-20 token\n        amountBN = toDNC20TokenSmallestUnit('' + amount, asset.decimals);\n        balanceBN = new BigNumber(selectedAccount.balances[asset.contractAddress]);\n    }\n\n    return amountBN.lte(balanceBN);\n};\n\nexport const getAssetBalance = (selectedAccount, asset) => {\n    if(asset.name === 'Dnero'){\n        return formatNativeTokenAmountToLargestUnit(selectedAccount.balances['dnerowei']);\n    }\n    if(asset.name === 'Dnero Token'){\n        return formatNativeTokenAmountToLargestUnit(selectedAccount.balances['dtokenwei']);\n    }\n\n    const balance = selectedAccount.balances[asset.contractAddress] || '0';\n    return formatDNC20TokenAmountToLargestUnit(balance, asset.decimals);\n};\n\n\nexport const formDataToTransaction = async (transactionType, txFormData, dneroWalletState) => {\n    const accounts = dneroWalletState.accounts;\n    const selectedAddress = dneroWalletState.selectedAddress;\n    const selectedAccount = accounts[selectedAddress];\n    const tokens = dneroWalletState.tokens;\n    const chainId = dneroWalletState.network.chainId;\n    const assets = getAllAssets(chainId, tokens);\n\n    if (transactionType === 'send') {\n        const {to, assetId, amount} = txFormData;\n        const asset = _.find(assets, function (a) {\n            return a.id === assetId;\n        });\n\n        if (asset.contractAddress) {\n            // DNC20 token\n            // TODO ensure they have the balance\n            const dnc20Contract = new dnerojs.Contract(asset.contractAddress, DNC20ABI, null);\n            const amountBN = toDNC20TokenSmallestUnit(amount, asset.decimals);\n            return await dnc20Contract.populateTransaction.transfer(to, amountBN.toString());\n        }\n        else {\n            // Native token\n            const txData = {\n                from: selectedAddress,\n                outputs: [\n                    {\n                        address: to,\n                        dneroWei: (assetId === 'dnero' ? dnerojs.utils.toWei(amount) : '0'),\n                        dtokenWei: (assetId === 'dtoken' ? dnerojs.utils.toWei(amount) : '0')\n                    }\n                ]\n            };\n\n            return new dnerojs.transactions.SendTransaction(txData);\n        }\n    }\n    if(transactionType === 'withdraw-stake'){\n        const {holder, purpose, amount} = txFormData;\n        const purposeInt = parseInt(purpose);\n\n        if(purposeInt === StakePurposeForDDROP){\n            const dDropStakingAddress = DDropStakingAddressByChainId[chainId];\n            const ddropStakingContract = new dnerojs.Contract(dDropStakingAddress, DDropStakingABI, null);\n            const percentageToUnstake = parseFloat(amount) / 100;\n            const dnc20stakes = _.get(selectedAccount, ['dnc20Stakes'], {});\n            const balanceStr = _.get(dnc20stakes, 'ddrop.balance', '0');\n            const balanceBN = new BigNumber(balanceStr);\n            const amountBN = balanceBN.multipliedBy(percentageToUnstake).integerValue();\n            const unstakeTx = await ddropStakingContract.populateTransaction.unstake(amountBN.toString());\n\n            return unstakeTx;\n        }\n        else{\n            const txData = {\n                holder: holder,\n                purpose: purpose\n            };\n\n            return new dnerojs.transactions.WithdrawStakeTransaction(txData);\n        }\n    }\n    if(transactionType === 'deposit-stake'){\n        const {holder, holderSummary, purpose, amount} = txFormData;\n        const purposeInt = parseInt(purpose);\n\n        if(purposeInt === dnerojs.constants.StakePurpose.StakeForValidator){\n            const txData = {\n                holder: holder,\n                purpose: purposeInt,\n                amount: dnerojs.utils.toWei(amount),\n            };\n\n            return new dnerojs.transactions.DepositStakeTransaction(txData);\n        }\n        else if(purposeInt === dnerojs.constants.StakePurpose.StakeForSentry){\n            const txData = {\n                holderSummary: holderSummary,\n                purpose: purposeInt,\n                amount: dnerojs.utils.toWei(amount),\n            };\n\n            return new dnerojs.transactions.DepositStakeV2Transaction(txData);\n        }\n        else if(purposeInt === dnerojs.constants.StakePurpose.StakeForEliteEdge){\n            const txData = {\n                holderSummary: holderSummary,\n                purpose: purposeInt,\n                amount: dnerojs.utils.toWei(amount),\n            };\n\n            return new dnerojs.transactions.DepositStakeV2Transaction(txData);\n        }\n        else if(purposeInt === StakePurposeForDDROP){\n            const dDropAddress = DDropAddressByChainId[chainId];\n            const dDropStakingAddress = DDropStakingAddressByChainId[chainId];\n            const ddropContract = new dnerojs.Contract(dDropAddress, DNC20ABI, null);\n            const ddropStakingContract = new dnerojs.Contract(dDropStakingAddress, DDropStakingABI, null);\n            const assetsById = _.keyBy(assets, 'id');\n            const dDropAsset = assetsById[dDropAddress];\n            const amountBN = toDNC20TokenSmallestUnit(amount, dDropAsset.decimals);\n            const approveTx = await ddropContract.populateTransaction.approve(dDropStakingAddress,amountBN.toString());\n            const stakeTx = await ddropStakingContract.populateTransaction.stake(amountBN.toString());\n            // We are sending the approve TX in the background which fails because the amount hasn't been approved yet...so we will hardcode this gas limit for now\n            stakeTx.gasLimit = 150000;\n            stakeTx.dependencies = [\n                approveTx\n            ];\n\n            return stakeTx;\n        }\n    }\n    else if(transactionType === 'delegate-ddrop-vote'){\n        const {address} = txFormData;\n        const dDropStakingAddress = DDropStakingAddressByChainId[chainId];\n        const ddropStakingContract = new dnerojs.Contract(dDropStakingAddress, DDropStakingABI, null);\n        const delegateTx = await ddropStakingContract.populateTransaction.delegate(address);\n\n        return delegateTx;\n    }\n};\n\nexport const transactionTypeToName = (txType) => {\n    if(_.isNil(txType)){\n        return  null;\n    }\n\n    switch (txType) {\n        case dnerojs.constants.TxType.Send:\n            return 'Send';\n        case dnerojs.constants.TxType.SmartContract:\n            return 'Call Contract';\n        case dnerojs.constants.TxType.DepositStake:\n            return 'Deposit Stake';\n        case dnerojs.constants.TxType.DepositStakeV2:\n            return 'Deposit Stake';\n        case dnerojs.constants.TxType.WithdrawStake:\n            return 'Withdraw Stake';\n        default:\n            return 'Unknown type';\n    }\n};\n\nexport const transactionRequestToTransactionType = (transactionRequest) => {\n    const txType = _.get(transactionRequest, 'txType');\n    const txData = _.get(transactionRequest, 'txData');\n\n    try {\n        if(txType === dnerojs.constants.TxType.SmartContract && _.isNil(_.get(txData, 'to'))){\n            return 'Deploy Contract';\n        }\n\n        const contractData = _.get(txData, 'data');\n        const dnc20Contract = new dnerojs.Contract(null, DNC20ABI, null);\n        const data = dnc20Contract.interface.decodeFunctionData('transfer(address,uint256)',contractData);\n        return 'Transfer Token';\n    }\n    catch (e) {\n\n    }\n\n    return transactionTypeToName(txType);\n};\n\nexport const isHolderSummary = (holderSummary) => {\n    if(holderSummary){\n        let expectedLen = 458;\n\n        if(holderSummary.startsWith('0x')){\n            expectedLen = expectedLen + 2;\n        }\n\n        return (holderSummary.length === expectedLen);\n    }\n    else{\n        return false;\n    }\n};\n\nexport function trimDecimalPlaces(x, maxDecimals) {\n    let parts = x.split('.');\n    let newFractional = '';\n    let foundNonZero = false;\n\n    _.map(parts[1], (char, idx) => {\n        if(foundNonZero){\n            return;\n        }\n        if((idx + 1) > maxDecimals){\n            return;\n        }\n\n        if(char !== '0'){\n            foundNonZero = true;\n        }\n        newFractional = newFractional + char;\n    });\n\n    parts[1] = newFractional;\n\n    return parts.join('.');\n}\n\nexport const sleep = (ms) => {\n    return new Promise(r => setTimeout(r, ms));\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}