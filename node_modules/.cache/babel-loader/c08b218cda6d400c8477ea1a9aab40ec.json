{"ast":null,"code":"import _defineProperty from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jjestrella/DNERO_Protocol/dnerowebwallet/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _ from'lodash';import React from\"react\";import'./SettingsPage.css';import PageHeader from\"../components/PageHeader\";import GradientButton from\"../components/buttons/GradientButton\";import Wallet from'../services/Wallet';import{downloadFile}from\"../utils/Utils\";import Alerts from'../services/Alerts';var ExportKeystoreContent=/*#__PURE__*/function(_React$Component){_inherits(ExportKeystoreContent,_React$Component);var _super=_createSuper(ExportKeystoreContent);function ExportKeystoreContent(){var _this;_classCallCheck(this,ExportKeystoreContent);_this=_super.call(this);_this.defaultState={currentPassword:'',password:'',passwordConfirmation:'',loading:false,error:null};_this.state=_this.defaultState;_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.prepareForExport=_this.prepareForExport.bind(_assertThisInitialized(_this));_this.exportKeystore=_this.exportKeystore.bind(_assertThisInitialized(_this));return _this;}_createClass(ExportKeystoreContent,[{key:\"validate\",value:function validate(){if(this.state.password.length>0&&this.state.passwordConfirmation.length>0&&this.state.password!==this.state.passwordConfirmation){this.setState({error:\"Your passwords do not match\"});}else{this.setState({error:\"\"});}}},{key:\"isValid\",value:function isValid(){return this.state.password.length>0&&this.state.passwordConfirmation.length>0&&this.state.password===this.state.passwordConfirmation;}},{key:\"handleChange\",value:function handleChange(event){var name=event.target.name;var value=event.target.value;this.setState(_defineProperty({},name,value),this.validate);}},{key:\"exportKeystore\",value:function exportKeystore(){try{var keystore=Wallet.exportKeystore(this.state.currentPassword,this.state.password);downloadFile(keystore.address+'.keystore',JSON.stringify(keystore));this.setState(this.defaultState);}catch(e){this.setState({loading:false});Alerts.showError(e.message);}}},{key:\"prepareForExport\",value:function prepareForExport(){this.setState({loading:true});setTimeout(this.exportKeystore,1000);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"ExportKeystoreContent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"InputTitle\"},\"Current Password\"),/*#__PURE__*/React.createElement(\"input\",{className:\"RoundedInput\",placeholder:\"Enter current password\",name:\"currentPassword\",type:\"password\",value:this.state.currentPassword,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"InputTitle\"},\"New Password\"),/*#__PURE__*/React.createElement(\"input\",{className:\"RoundedInput\",placeholder:\"Set a New Password\",name:\"password\",type:\"password\",value:this.state.password,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"InputTitle\"},\"Confirm New Password\"),/*#__PURE__*/React.createElement(\"input\",{className:\"RoundedInput\",placeholder:\"Re-enter Password\",name:\"passwordConfirmation\",type:\"password\",value:this.state.passwordConfirmation,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"InputError\"},this.state.error),/*#__PURE__*/React.createElement(GradientButton,{title:\"Export Keystore\",onClick:this.prepareForExport,style:{marginTop:15},loading:this.state.loading,disabled:this.state.loading||this.isValid()===false}));}}]);return ExportKeystoreContent;}(React.Component);var SettingsSection=/*#__PURE__*/function(_React$Component2){_inherits(SettingsSection,_React$Component2);var _super2=_createSuper(SettingsSection);function SettingsSection(){_classCallCheck(this,SettingsSection);return _super2.apply(this,arguments);}_createClass(SettingsSection,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"SettingsSection\"},/*#__PURE__*/React.createElement(\"div\",{className:\"SettingsSection__title\"},this.props.title),/*#__PURE__*/React.createElement(\"div\",{className:\"SettingsSection__content\"},this.props.children));}}]);return SettingsSection;}(React.Component);var SettingsPage=/*#__PURE__*/function(_React$Component3){_inherits(SettingsPage,_React$Component3);var _super3=_createSuper(SettingsPage);function SettingsPage(){_classCallCheck(this,SettingsPage);return _super3.apply(this,arguments);}_createClass(SettingsPage,[{key:\"render\",value:function render(){var canExport=_.isNil(Wallet.getWallet().hardware);return/*#__PURE__*/React.createElement(\"div\",{className:\"SettingsPage\"},/*#__PURE__*/React.createElement(\"div\",{className:\"SettingsPage__detail-view\"},/*#__PURE__*/React.createElement(PageHeader,{title:\"Settings\",sticky:true}),canExport&&/*#__PURE__*/React.createElement(SettingsSection,{title:\"Export Keystore\"},/*#__PURE__*/React.createElement(ExportKeystoreContent,null))));}}]);return SettingsPage;}(React.Component);export default SettingsPage;","map":{"version":3,"names":["_","React","PageHeader","GradientButton","Wallet","downloadFile","Alerts","ExportKeystoreContent","defaultState","currentPassword","password","passwordConfirmation","loading","error","state","handleChange","bind","prepareForExport","exportKeystore","length","setState","event","name","target","value","validate","keystore","address","JSON","stringify","e","showError","message","setTimeout","marginTop","isValid","Component","SettingsSection","props","title","children","SettingsPage","canExport","isNil","getWallet","hardware"],"sources":["/Users/jjestrella/DNERO_Protocol/dnerowebwallet/src/pages/SettingsPage.js"],"sourcesContent":["import _ from 'lodash';\nimport React from \"react\";\nimport './SettingsPage.css';\nimport PageHeader from \"../components/PageHeader\";\nimport GradientButton from \"../components/buttons/GradientButton\";\nimport Wallet from '../services/Wallet';\nimport {downloadFile} from \"../utils/Utils\";\nimport Alerts from '../services/Alerts';\n\nclass ExportKeystoreContent extends React.Component {\n    constructor(){\n        super();\n\n        this.defaultState = {\n            currentPassword: '',\n            password: '',\n            passwordConfirmation:  '',\n\n            loading: false,\n\n            error: null\n        };\n\n        this.state = this.defaultState;\n\n        this.handleChange = this.handleChange.bind(this);\n        this.prepareForExport = this.prepareForExport.bind(this);\n        this.exportKeystore = this.exportKeystore.bind(this);\n    }\n\n    validate(){\n        if(this.state.password.length > 0 &&\n            this.state.passwordConfirmation.length > 0 &&\n            this.state.password !== this.state.passwordConfirmation){\n            this.setState({error: \"Your passwords do not match\"});\n        }\n        else{\n            this.setState({error: \"\"});\n        }\n    }\n\n    isValid(){\n        return (this.state.password.length > 0 &&\n            this.state.passwordConfirmation.length > 0 &&\n            this.state.password === this.state.passwordConfirmation);\n    }\n\n    handleChange(event) {\n        let name = event.target.name;\n        let value = event.target.value;\n\n        this.setState({[name]: value}, this.validate);\n    }\n\n    exportKeystore(){\n        try {\n            let keystore = Wallet.exportKeystore(this.state.currentPassword, this.state.password);\n\n            downloadFile(keystore.address + '.keystore', JSON.stringify(keystore));\n\n            this.setState(this.defaultState);\n        }\n        catch (e) {\n            this.setState({\n                loading: false\n            });\n\n            Alerts.showError(e.message);\n        }\n\n    }\n\n    prepareForExport(){\n        this.setState({\n            loading: true\n        });\n\n        setTimeout(this.exportKeystore, 1000);\n    }\n\n    render() {\n        return (\n            <div className=\"ExportKeystoreContent\">\n                <div className=\"InputTitle\">Current Password</div>\n                <input className=\"RoundedInput\"\n                       placeholder=\"Enter current password\"\n                       name=\"currentPassword\"\n                       type=\"password\"\n                       value={this.state.currentPassword}\n                       onChange={this.handleChange}\n                />\n                <div className=\"InputTitle\">New Password</div>\n                <input className=\"RoundedInput\"\n                       placeholder=\"Set a New Password\"\n                       name=\"password\"\n                       type=\"password\"\n                       value={this.state.password}\n                       onChange={this.handleChange}\n                />\n                <div className=\"InputTitle\">Confirm New Password</div>\n                <input className=\"RoundedInput\"\n                       placeholder=\"Re-enter Password\"\n                       name=\"passwordConfirmation\"\n                       type=\"password\"\n                       value={this.state.passwordConfirmation}\n                       onChange={this.handleChange}\n                />\n                <div className=\"InputError\">\n                    {this.state.error}\n                </div>\n\n                <GradientButton title=\"Export Keystore\"\n                                onClick={this.prepareForExport}\n                                style={{marginTop: 15}}\n                                loading={this.state.loading}\n                                disabled={(this.state.loading || this.isValid() === false)}\n                />\n            </div>\n        );\n    }\n}\n\nclass SettingsSection extends React.Component {\n    render() {\n        return (\n            <div className=\"SettingsSection\">\n                <div className=\"SettingsSection__title\">\n                    {this.props.title}\n                </div>\n\n                <div className=\"SettingsSection__content\">\n                    { this.props.children }\n                </div>\n            </div>\n        );\n    }\n}\n\nclass SettingsPage extends React.Component {\n    render() {\n        let canExport = _.isNil(Wallet.getWallet().hardware);\n\n        return (\n            <div className=\"SettingsPage\">\n                <div className=\"SettingsPage__detail-view\">\n                    <PageHeader title=\"Settings\"\n                                sticky={true}\n                    />\n\n                    {\n                        canExport &&\n                        <SettingsSection title=\"Export Keystore\">\n                            <ExportKeystoreContent/>\n                        </SettingsSection>\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default SettingsPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}